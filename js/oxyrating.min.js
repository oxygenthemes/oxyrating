/*! oxyRating - v0.1 - 2014-04-29
 * http://oxygenthemes.com/oxyrating
 * Copyright (c) 2014 OxygenThemes; Licensed MIT */
(function(a){a.fn.oxyrating=function(l,k,j){switch(l){case"set":var f=a(this);e(f);if(!o()){return this}if(n[k]==j){return this}switch(k){case"value":c(k);break;case"disabled":h.toggleClass("oxyrating-disabled");n[k]=j;m();break;case"reset":if(j){a('<li class="oxyrating-reset"/>').prependTo(h)}else{h.find(".oxyrating-reset").remove()}n[k]=j;m();break;case"tooltip":if(j){a('<li class="oxyrating-tooltip"/>').appendTo(h);r(f.val())}else{h.find(".oxyrating-tooltip").remove()}n[k]=j;m();break;case"skin":var d=n[k];n[k]=j;h.removeClass("oxyrating-skin-"+d).addClass("oxyrating-skin-"+j);break;case"tooltipTexts":n[k]=j;r(f.val());break}return this;case"reset":a(this).oxyrating("set","value",0);return this;case"destroy":var f=a(this);e(f);if(!o()){return this}h.remove();return this}var q=a.extend({number:5,type:"full",disabled:false,value:null,reset:false,skin:"default",tooltip:false,tooltipTexts:["Vote","Horrible :O","Bad :(","Ok!","Good!","Excellent!!!"],onChange:function(t,u){},onInit:function(t,u){},onCreate:function(u,t){}},l),h=null,s=null,n={};if(typeof l!=="undefined"&&("value" in l)){q.value=parseFloat(l.value)}function m(){h.off("click",".oxyrating-unit").off("mouseenter",".oxyrating-unit").off("mouseleave",".oxyrating-unit").off("click",".oxyrating-reset");b()}function e(t){s=t;h=t.prev(".oxyrating");n=s.data("oxyrating")}function o(){return("oxyrating" in s.data())}function p(){var t={};if(q.value===null){t.value=s.is("[value]")?parseFloat(s.attr("value")):0}t.number=s.data("oxyratingNumber")||q.number;t.type=s.data("oxyratingType")||q.type;t.disabled=("oxyratingDisabled" in s.data())?s.data("oxyratingDisabled"):q.disabled;t.reset=("oxyratingReset" in s.data())?s.data("oxyratingReset"):q.reset;t.skin=s.data("oxyratingSkin")||q.skin;t.tooltip=("oxyratingTooltip" in s.data())?s.data("oxyratingTooltip"):q.tooltip;g(a.extend({},q,t));n.onInit(s,n);s.hide()}function i(){h=a('<ul class="oxyrating"/>');h.addClass("oxyrating-skin-"+n.skin);var u=n.number;if(n.type=="half"){u=n.number*2;h.addClass("oxyrating-half")}if(n.disabled){h.addClass("oxyrating-disabled")}var v=a('<ul class="oxyrating-units"/>');for(var t=0;t<u;t++){a('<li class="oxyrating-unit"/>').appendTo(v)}v.find("li:nth-child(odd)").addClass("oxyrating-odd");v.find("li:nth-child(even)").addClass("oxyrating-even");v.appendTo(h).wrap("<li/>");if(t>0){h.insertBefore(s);if(n.reset){a('<li class="oxyrating-reset"/>').prependTo(h)}}if(n.tooltip){a('<li class="oxyrating-tooltip"/>').appendTo(h)}c(n.value,true);n.onCreate(s,h)}function r(t){if(n.type==="half"&&(t*10%10)){t=(t*2+1)/2}h.find(".oxyrating-tooltip").text(n.tooltipTexts[t])}function c(w,u){u=u||false;if(w===n.value&&!u){return}if(w==0){h.find(".oxyrating-unit").removeClass("oxyrating-active")}else{var t=(n.type=="half")?w*2:w;var v=h.find(".oxyrating-units .oxyrating-unit:eq("+(t-1)+")");v.prevAll(".oxyrating-unit").addClass("oxyrating-active");v.addClass("oxyrating-active");v.nextAll(".oxyrating-unit").removeClass("oxyrating-active")}g({value:w});s.val(w);r(w);if(!u){n.onChange(s,w)}}function g(t){n=a.extend({},n,t);s.data("oxyrating",n)}function b(){if(!n.disabled){h.on("click",".oxyrating-unit",function(v){var u=a(this);e(u.closest(".oxyrating").next());var t=u.index()+1;if(n.type=="half"){t/=2}c(t)}).on("mouseenter",".oxyrating-unit",function(){a(this).addClass("oxyrating-hover").prevUntil(".oxyrating-reset").addClass("oxyrating-hover")}).on("mouseleave",".oxyrating-unit",function(){a(this).removeClass("oxyrating-hover").siblings(".oxyrating-unit").removeClass("oxyrating-hover")});if(n.reset){h.on("click",".oxyrating-reset",function(){var t=a(this);e(t.parent().next());c(0)})}}}this.each(function(){s=a(this);p();i();b();return this})}})(jQuery);